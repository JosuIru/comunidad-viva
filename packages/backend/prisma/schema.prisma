generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AbundanceAnnouncement {
  id              String    @id
  communityId     String?
  providerId      String?
  what            String
  quantity        String?
  where           String
  lat             Float?
  lng             Float?
  availableUntil  DateTime?
  visibleToLayers String[]
  takenBy         String[]
  createdAt       DateTime  @default(now())
  expiresAt       DateTime?

  @@index([communityId])
  @@index([createdAt])
}

model AnonymousCelebration {
  id                      String   @id
  communityId             String?
  event                   String
  description             String?
  emoji                   String?
  approximateParticipants Int?
  createdAt               DateTime @default(now())

  @@index([communityId])
  @@index([createdAt])
}

model AuditLog {
  id        String   @id @default(cuid())
  userId    String?
  action    String
  entity    String
  entityId  String?
  oldData   Json?
  newData   Json?
  ip        String?
  userAgent String?
  createdAt DateTime @default(now())

  @@index([createdAt])
  @@index([entity, entityId])
  @@index([userId])
}

model BlockValidation {
  id          String             @id
  blockId     String
  validatorId String
  decision    ValidationDecision
  reason      String?
  stake       Int
  createdAt   DateTime           @default(now())
  TrustBlock  TrustBlock         @relation(fields: [blockId], references: [id])
  User        User               @relation(fields: [validatorId], references: [id])

  @@unique([blockId, validatorId])
  @@index([blockId])
  @@index([validatorId])
}

model BridgeEvent {
  id                String          @id
  communityId       String?
  type              BridgeEventType
  title             String
  description       String
  forceLayer        EconomicLayer?
  startsAt          DateTime
  endsAt            DateTime
  recurring         Boolean         @default(false)
  frequency         String?
  participantsCount Int             @default(0)
  createdAt         DateTime        @default(now())

  @@index([communityId])
  @@index([startsAt])
  @@index([type])
}

model BridgeTransaction {
  id              String          @id
  userId          String
  userDID         String
  amount          Float
  fee             Float
  direction       BridgeDirection
  targetChain     BridgeChain
  externalAddress String
  externalTxHash  String?
  internalTxId    String?
  status          BridgeStatus    @default(PENDING)
  error           String?
  createdAt       DateTime        @default(now())
  completedAt     DateTime?
  User            User            @relation(fields: [userId], references: [id])

  @@index([createdAt])
  @@index([externalTxHash])
  @@index([status])
  @@index([targetChain])
  @@index([userDID])
  @@index([userId])
}

model ChainLink {
  id                              String    @id
  chainId                         String
  fromUserId                      String
  toUserId                        String
  action                          String
  message                         String?
  timestamp                       DateTime  @default(now())
  HelpChain                       HelpChain @relation(fields: [chainId], references: [id])
  User_ChainLink_fromUserIdToUser User      @relation("ChainLink_fromUserIdToUser", fields: [fromUserId], references: [id])
  User_ChainLink_toUserIdToUser   User      @relation("ChainLink_toUserIdToUser", fields: [toUserId], references: [id])

  @@index([chainId])
}

model ChallengeParticipant {
  id              String          @id
  challengeId     String
  userId          String
  progress        Int             @default(0)
  completed       Boolean         @default(false)
  completedAt     DateTime?
  createdAt       DateTime        @default(now())
  WeeklyChallenge WeeklyChallenge @relation(fields: [challengeId], references: [id])
  User            User            @relation(fields: [userId], references: [id])

  @@unique([challengeId, userId])
  @@index([challengeId])
  @@index([userId])
}

model CirculoConciencia {
  id                   String                 @id
  name                 String
  description          String
  level                Int
  type                 CirculoType
  maxParticipants      Int?
  isOpen               Boolean                @default(true)
  requiresInvite       Boolean                @default(false)
  facilitatorDID       String
  facilitatorIds       String[]
  schedule             Json?
  location             String?
  language             String                 @default("es")
  practices            String[]
  resources            Json                   @default("[]")
  status               CirculoStatus          @default(ACTIVE)
  createdAt            DateTime               @default(now())
  updatedAt            DateTime
  CirculoParticipacion CirculoParticipacion[]

  @@index([level])
  @@index([status])
  @@index([type])
}

model CirculoParticipacion {
  id                  String              @id
  userId              String
  circuloId           String
  role                ParticipacionRole   @default(MEMBER)
  status              ParticipacionStatus @default(ACTIVE)
  attendanceRate      Float               @default(0)
  contributionLevel   Int                 @default(0)
  consciousnessGrowth Float               @default(0)
  reflections         Json                @default("[]")
  joinedAt            DateTime            @default(now())
  lastAttendedAt      DateTime?
  leftAt              DateTime?
  CirculoConciencia   CirculoConciencia   @relation(fields: [circuloId], references: [id])
  User                User                @relation(fields: [userId], references: [id])

  @@unique([userId, circuloId])
  @@index([circuloId])
  @@index([status])
  @@index([userId])
}

model Comment {
  id        String    @id
  postId    String
  authorId  String
  content   String
  createdAt DateTime  @default(now())
  editedAt  DateTime?
  User      User      @relation(fields: [authorId], references: [id])
  Post      Post      @relation(fields: [postId], references: [id])

  @@index([authorId])
  @@index([postId])
}

model Community {
  id                                                                   String                 @id
  slug                                                                 String                 @unique
  name                                                                 String
  description                                                          String?
  logo                                                                 String?
  bannerImage                                                          String?
  location                                                             String?
  lat                                                                  Float?
  lng                                                                  Float?
  radiusKm                                                             Float?
  type                                                                 CommunityType
  visibility                                                           CommunityVisibility
  requiresApproval                                                     Boolean                @default(false)
  allowExternalOffers                                                  Boolean                @default(false)
  primaryColor                                                         String?
  language                                                             String                 @default("es")
  currency                                                             String                 @default("EUR")
  membersCount                                                         Int                    @default(0)
  activeOffersCount                                                    Int                    @default(0)
  createdAt                                                            DateTime               @default(now())
  updatedAt                                                            DateTime
  CommunityConnection_CommunityConnection_sourceCommunityIdToCommunity CommunityConnection[]  @relation("CommunityConnection_sourceCommunityIdToCommunity")
  CommunityConnection_CommunityConnection_targetCommunityIdToCommunity CommunityConnection[]  @relation("CommunityConnection_targetCommunityIdToCommunity")
  CommunityGovernance                                                  CommunityGovernance?
  CommunityGuarantee                                                   CommunityGuarantee[]
  CommunityIntegration                                                 CommunityIntegration[]
  CommunityPack                                                        CommunityPack?
  CommunityProject                                                     CommunityProject[]
  Contribution                                                         Contribution[]
  Event                                                                Event[]
  HousingCoop                                                          HousingCoop[]
  MembershipRequest                                                    MembershipRequest[]
  Need                                                                 Need[]
  Offer                                                                Offer[]
  SpaceBank                                                            SpaceBank[]
  TemporaryHousing                                                     TemporaryHousing[]
  User                                                                 User[]

  @@index([lat, lng])
  @@index([slug])
  @@index([type])
  @@index([visibility])
}

model CommunityBridge {
  id                String                @id
  sourceCommunityId String
  targetCommunityId String
  bridgeType        BridgeType
  strength          Float                 @default(0)
  sharedMembers     Int                   @default(0)
  transactions      Int                   @default(0)
  events            Int                   @default(0)
  lastInteractionAt DateTime?
  initiatedBy       String?
  status            CommunityBridgeStatus @default(PENDING)
  notes             String?
  createdAt         DateTime              @default(now())
  updatedAt         DateTime

  @@unique([sourceCommunityId, targetCommunityId])
  @@index([bridgeType])
  @@index([sourceCommunityId])
  @@index([status])
  @@index([targetCommunityId])
}

model CommunityConnection {
  id                                                         String           @id
  sourceCommunityId                                          String
  targetCommunityId                                          String
  status                                                     ConnectionStatus @default(PENDING)
  shareOffers                                                Boolean          @default(true)
  shareEvents                                                Boolean          @default(true)
  initiatedBy                                                String?
  approvedBy                                                 String?
  createdAt                                                  DateTime         @default(now())
  approvedAt                                                 DateTime?
  Community_CommunityConnection_sourceCommunityIdToCommunity Community        @relation("CommunityConnection_sourceCommunityIdToCommunity", fields: [sourceCommunityId], references: [id])
  Community_CommunityConnection_targetCommunityIdToCommunity Community        @relation("CommunityConnection_targetCommunityIdToCommunity", fields: [targetCommunityId], references: [id])

  @@unique([sourceCommunityId, targetCommunityId])
  @@index([sourceCommunityId])
  @@index([status])
  @@index([targetCommunityId])
}

model CommunityIntegration {
  id            String              @id @default(uuid())
  communityId   String
  platform      IntegrationPlatform
  channelId     String
  channelName   String?
  botToken      String
  autoPublish   Boolean             @default(false)
  categories    String[]            @default([])
  enabled       Boolean             @default(true)
  publishOffers Boolean             @default(true)
  publishEvents Boolean             @default(true)
  publishNeeds  Boolean             @default(true)
  messageFormat String?
  createdAt     DateTime            @default(now())
  updatedAt     DateTime            @updatedAt
  createdBy     String?
  Community     Community           @relation(fields: [communityId], references: [id])

  @@unique([communityId, platform, channelId])
  @@index([communityId])
  @@index([platform])
  @@index([enabled])
}

model CommunityGovernance {
  id                    String    @id
  communityId           String    @unique
  minProposalReputation Float     @default(10.0)
  minVoteReputation     Float     @default(1.0)
  minModerateReputation Float     @default(5.0)
  quorumPercentage      Int       @default(20)
  approvalPercentage    Int       @default(66)
  proposalDuration      Int       @default(7)
  votingDuration        Int       @default(3)
  useQuadraticVoting    Boolean   @default(true)
  maxVoteCredits        Int       @default(100)
  autoModerateThreshold Int       @default(5)
  banThreshold          Int       @default(10)
  founders              String[]
  foundedAt             DateTime  @default(now())
  bootstrapEndDate      DateTime?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime
  Community             Community @relation(fields: [communityId], references: [id])

  @@index([communityId])
}

model CommunityGuarantee {
  id                 String               @id
  userId             String
  communityId        String?
  landlordName       String?
  landlordEmail      String?
  landlordPhone      String?
  propertyAddress    String
  monthlyRent        Float
  coverageMonths     Int                  @default(3)
  maxCoverage        Float
  reputation         Int
  status             GuaranteeStatus      @default(PENDING)
  fundAllocated      Float?
  fundUsed           Float                @default(0)
  activatedAt        DateTime?
  expiresAt          DateTime?
  claimsCount        Int                  @default(0)
  lastClaimAt        DateTime?
  createdAt          DateTime             @default(now())
  updatedAt          DateTime
  Community          Community?           @relation(fields: [communityId], references: [id])
  User               User                 @relation(fields: [userId], references: [id])
  GuaranteeSupporter GuaranteeSupporter[]

  @@index([communityId])
  @@index([status])
  @@index([userId])
}

model CommunityLayerConfig {
  id                String        @id
  communityId       String        @unique
  defaultLayer      EconomicLayer @default(TRADITIONAL)
  allowMixedMode    Boolean       @default(true)
  traditionalCount  Int           @default(0)
  transitionalCount Int           @default(0)
  giftCount         Int           @default(0)
  chameleonCount    Int           @default(0)
  autoGiftDays      Boolean       @default(true)
  autoDebtAmnesty   Boolean       @default(true)
  giftThreshold     Int           @default(60)
  createdAt         DateTime      @default(now())
  updatedAt         DateTime

  @@index([communityId])
}

model CommunityMetric {
  id            String        @id
  packId        String
  metricKey     String
  metricName    String
  currentValue  Float         @default(0)
  targetValue   Float?
  unit          String?
  period        MetricPeriod  @default(ALL_TIME)
  history       Json          @default("[]")
  createdAt     DateTime      @default(now())
  updatedAt     DateTime
  CommunityPack CommunityPack @relation(fields: [packId], references: [id], onDelete: Cascade)

  @@unique([packId, metricKey, period])
  @@index([packId])
}

model CommunityMetrics {
  id                  String   @id
  date                DateTime
  area                String
  activeUsers         Int
  newUsers            Int
  newConnections      Int
  hoursExchanged      Float
  eurosSaved          Float
  creditsCirculated   Int
  co2Avoided          Float
  wasteReduced        Float
  eventsHeld          Int
  groupBuysCompleted  Int
  helpChains          Int
  averageResponseTime Float
  satisfactionScore   Float
  weeklyHighlight     String?
  createdAt           DateTime @default(now())

  @@unique([date, area])
  @@index([area])
  @@index([date])
}

model CommunityPack {
  id                 String                 @id
  communityId        String                 @unique
  packType           OrganizedCommunityType
  setupCompleted     Boolean                @default(false)
  setupProgress      Int                    @default(0)
  currentStep        String?
  enabledFeatures    String[]               @default([])
  customConfig       Json                   @default("{}")
  trackingMetrics    String[]               @default([])
  goals              Json                   @default("{}")
  completedGuides    String[]               @default([])
  assignedMentor     String?
  createdAt          DateTime               @default(now())
  updatedAt          DateTime
  CommunityMetric    CommunityMetric[]
  Community          Community              @relation(fields: [communityId], references: [id], onDelete: Cascade)
  CommunitySetupStep CommunitySetupStep[]

  @@index([packType])
  @@index([setupCompleted])
}

model CommunityPool {
  id               String             @id
  type             PoolType           @unique
  balance          Int                @default(0)
  totalReceived    Int                @default(0)
  totalDistributed Int                @default(0)
  description      String?
  lastDistribution DateTime?
  createdAt        DateTime           @default(now())
  updatedAt        DateTime
  PoolContribution PoolContribution[]
  PoolRequest      PoolRequest[]
}

model CommunityProject {
  id                       String          @id
  creatorId                String
  communityId              String?
  type                     ProjectType
  title                    String
  description              String
  vision                   String
  images                   String[]        @default([])
  videoUrl                 String?
  location                 String
  latitude                 Float?
  longitude                Float?
  country                  String
  region                   String?
  beneficiaries            Int?
  impactGoals              String[]        @default([])
  targetEur                Float?
  targetCredits            Int?
  targetHours              Float?
  targetSkills             String[]        @default([])
  materialNeeds            Json?
  currentEur               Float           @default(0)
  currentCredits           Int             @default(0)
  currentHours             Float           @default(0)
  participatingCommunities String[]        @default([])
  contributorsCount        Int             @default(0)
  volunteersNeeded         Int?
  volunteersEnrolled       Int             @default(0)
  startDate                DateTime?
  endDate                  DateTime?
  estimatedMonths          Int?
  status                   ProjectStatus   @default(FORMING)
  completionRate           Float           @default(0.0)
  isVerified               Boolean         @default(false)
  verifiedBy               String?
  organizationName         String?
  contactEmail             String?
  websiteUrl               String?
  tags                     String[]        @default([])
  sdgGoals                 Int[]           @default([])
  createdAt                DateTime        @default(now())
  updatedAt                DateTime
  completedAt              DateTime?
  Community                Community?      @relation(fields: [communityId], references: [id])
  User                     User            @relation(fields: [creatorId], references: [id])
  Contribution             Contribution[]
  ImpactReport             ImpactReport[]
  ProjectPhase             ProjectPhase[]
  ProjectUpdate            ProjectUpdate[]

  @@index([communityId])
  @@index([country])
  @@index([creatorId])
  @@index([status])
  @@index([tags])
  @@index([type])
}

model CommunitySetupStep {
  id            String        @id
  packId        String
  stepKey       String
  stepOrder     Int
  title         String
  description   String?
  completed     Boolean       @default(false)
  completedAt   DateTime?
  data          Json          @default("{}")
  createdAt     DateTime      @default(now())
  updatedAt     DateTime
  CommunityPack CommunityPack @relation(fields: [packId], references: [id], onDelete: Cascade)

  @@unique([packId, stepKey])
  @@index([packId, stepOrder])
}

model Connection {
  id                                String         @id
  userId                            String
  connectedId                       String
  type                              ConnectionType
  strength                          Int            @default(1)
  createdAt                         DateTime       @default(now())
  lastInteraction                   DateTime       @default(now())
  User_Connection_connectedIdToUser User           @relation("Connection_connectedIdToUser", fields: [connectedId], references: [id])
  User_Connection_userIdToUser      User           @relation("Connection_userIdToUser", fields: [userId], references: [id])

  @@unique([userId, connectedId])
  @@index([strength])
}

model Contribution {
  id               String             @id
  userId           String?
  communityId      String?
  needId           String?
  projectId        String?
  phaseId          String?
  contributionType ContributionType
  amountEur        Float?
  amountCredits    Int?
  amountHours      Float?
  skillsOffered    String[]           @default([])
  materialsOffered Json?
  equipmentOffered String[]           @default([])
  message          String?
  isAnonymous      Boolean            @default(false)
  isRecurring      Boolean            @default(false)
  recurringMonths  Int?
  status           ContributionStatus @default(PENDING)
  proofDocuments   String[]           @default([])
  validatedAt      DateTime?
  validatedBy      String?
  recognitionPost  String?
  impactStory      String?
  createdAt        DateTime           @default(now())
  updatedAt        DateTime
  completedAt      DateTime?
  refundedAt       DateTime?
  Community        Community?         @relation(fields: [communityId], references: [id])
  Need             Need?              @relation(fields: [needId], references: [id], onDelete: Cascade)
  CommunityProject CommunityProject?  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  User             User?              @relation(fields: [userId], references: [id])

  @@index([communityId])
  @@index([contributionType])
  @@index([needId])
  @@index([projectId])
  @@index([status])
  @@index([userId])
}

model CreditTransaction {
  id          String       @id
  userId      String
  amount      Int
  balance     Int
  reason      CreditReason
  description String?
  relatedId   String?
  metadata    Json?
  expiresAt   DateTime?
  createdAt   DateTime     @default(now())
  User        User         @relation(fields: [userId], references: [id])

  @@index([createdAt])
  @@index([reason])
  @@index([userId])
}

model DailySeed {
  id                      String                    @id
  date                    DateTime                  @unique
  type                    SeedType
  challenge               String
  description             String
  creditsReward           Int
  participantsCount       Int                       @default(0)
  createdAt               DateTime                  @default(now())
  UserDailySeedCompletion UserDailySeedCompletion[]
}

model EconomicMetrics {
  id                    String   @id
  date                  DateTime @unique
  giniIndex             Float
  medianBalance         Int
  meanBalance           Int
  wealthConcentration   Float
  transactionsCount     Int
  averageFlowMultiplier Float
  totalValueGenerated   Int
  totalPoolBalance      Int
  poolDistributions     Int
  activeUsers           Int
  generousUsers         Int
  createdAt             DateTime @default(now())

  @@index([date])
  @@index([giniIndex])
}

model Event {
  id            String          @id
  offerId       String?         @unique
  organizerId   String
  title         String
  description   String
  image         String?
  lat           Float
  lng           Float
  address       String
  startsAt      DateTime
  endsAt        DateTime
  capacity      Int?
  creditsReward Int             @default(0)
  tags          String[]
  type          EventType
  requirements  String[]
  createdAt     DateTime        @default(now())
  updatedAt     DateTime
  communityId   String?
  qrCode        String?         @unique
  status        EventStatus     @default(ACTIVE)
  Community     Community?      @relation(fields: [communityId], references: [id])
  Offer         Offer?          @relation(fields: [offerId], references: [id])
  User          User            @relation(fields: [organizerId], references: [id])
  EventAttendee EventAttendee[]

  @@index([communityId])
  @@index([organizerId])
  @@index([startsAt])
  @@index([type])
}

model EventAttendee {
  id            String       @id
  eventId       String
  userId        String
  role          AttendeeRole @default(PARTICIPANT)
  registeredAt  DateTime     @default(now())
  checkedInAt   DateTime?
  feedback      String?
  creditsEarned Int          @default(0)
  Event         Event        @relation(fields: [eventId], references: [id])
  User          User         @relation(fields: [userId], references: [id])

  @@unique([eventId, userId])
}

model FederatedActivity {
  id            String             @id
  activityId    String             @unique
  type          ActivityType
  publisherDID  String
  publisherId   String?
  nodeId        String
  object        Json
  content       String?
  metadata      Json               @default("{}")
  visibility    ActivityVisibility @default(PUBLIC)
  targetNodes   String[]
  likes         Int                @default(0)
  shares        Int                @default(0)
  comments      Int                @default(0)
  publishedAt   DateTime           @default(now())
  receivedAt    DateTime           @default(now())
  FederatedNode FederatedNode      @relation(fields: [nodeId], references: [id])
  User          User?              @relation(fields: [publisherId], references: [id])

  @@index([nodeId])
  @@index([publishedAt])
  @@index([publisherDID])
  @@index([type])
}

model FederatedNode {
  id                String              @id
  nodeId            String              @unique
  name              String
  type              NodeType
  url               String
  publicKey         String
  description       String?
  location          String?
  status            NodeStatus          @default(ACTIVE)
  protocolVersion   String              @default("1.0")
  capabilities      Json                @default("{}")
  lastSyncAt        DateTime?
  totalUsers        Int                 @default(0)
  trustScore        Float               @default(0.5)
  createdAt         DateTime            @default(now())
  updatedAt         DateTime
  FederatedActivity FederatedActivity[]

  @@index([nodeId])
  @@index([status])
}

model FlashDeal {
  id                  String                @id
  merchantId          String
  title               String
  discount            Int
  originalPrice       Int?
  finalPrice          Int?
  product             String
  description         String?
  maxRedemptions      Int
  currentRedemptions  Int                   @default(0)
  status              FlashDealStatus       @default(ACTIVE)
  expiresAt           DateTime
  createdAt           DateTime              @default(now())
  Merchant            Merchant              @relation(fields: [merchantId], references: [id])
  FlashDealRedemption FlashDealRedemption[]

  @@index([expiresAt])
  @@index([merchantId])
  @@index([status])
}

model FlashDealRedemption {
  id         String    @id
  dealId     String
  userId     String
  redeemedAt DateTime  @default(now())
  FlashDeal  FlashDeal @relation(fields: [dealId], references: [id])
  User       User      @relation(fields: [userId], references: [id])

  @@index([dealId])
  @@index([userId])
}

model FlowTransaction {
  id                                    String       @id
  fromUserId                            String
  toUserId                              String
  baseAmount                            Int
  flowMultiplier                        Float        @default(1.0)
  totalValue                            Int
  type                                  FlowType
  description                           String?
  reason                                CreditReason
  relatedId                             String?
  metadata                              Json?
  fromBalance                           Int
  toBalance                             Int
  poolContribution                      Int          @default(0)
  createdAt                             DateTime     @default(now())
  User_FlowTransaction_fromUserIdToUser User         @relation("FlowTransaction_fromUserIdToUser", fields: [fromUserId], references: [id])
  User_FlowTransaction_toUserIdToUser   User         @relation("FlowTransaction_toUserIdToUser", fields: [toUserId], references: [id])

  @@index([createdAt])
  @@index([fromUserId])
  @@index([toUserId])
  @@index([type])
}

model GroupBuy {
  id                  String                @id
  offerId             String                @unique
  minParticipants     Int
  maxParticipants     Int
  currentParticipants Int                   @default(0)
  deadline            DateTime
  pickupLat           Float
  pickupLng           Float
  pickupAddress       String
  createdAt           DateTime              @default(now())
  status              GroupBuyStatus        @default(ACTIVE)
  Offer               Offer                 @relation(fields: [offerId], references: [id])
  GroupBuyOrder       GroupBuyOrder[]
  GroupBuyParticipant GroupBuyParticipant[]
  PriceBreak          PriceBreak[]

  @@index([deadline])
  @@index([status])
}

model GroupBuyOrder {
  id              String              @id
  groupBuyId      String
  userId          String
  quantity        Int
  pricePerUnit    Float
  totalAmount     Float
  status          GroupBuyOrderStatus @default(PENDING)
  pickupScheduled DateTime?
  pickedUpAt      DateTime?
  createdAt       DateTime            @default(now())
  updatedAt       DateTime
  GroupBuy        GroupBuy            @relation(fields: [groupBuyId], references: [id])
  User            User                @relation(fields: [userId], references: [id])

  @@unique([groupBuyId, userId])
  @@index([status])
  @@index([userId])
}

model GroupBuyParticipant {
  id         String   @id
  groupBuyId String
  userId     String
  quantity   Int
  committed  Boolean  @default(false)
  joinedAt   DateTime @default(now())
  GroupBuy   GroupBuy @relation(fields: [groupBuyId], references: [id])
  User       User     @relation(fields: [userId], references: [id])

  @@unique([groupBuyId, userId])
  @@index([userId])
}

model GuaranteeSupporter {
  id                 String             @id
  guaranteeId        String
  supporterId        String
  monthsCommitted    Int                @default(1)
  amountCommitted    Float
  status             SupportStatus      @default(ACTIVE)
  amountPaid         Float              @default(0)
  paidAt             DateTime?
  createdAt          DateTime           @default(now())
  updatedAt          DateTime
  CommunityGuarantee CommunityGuarantee @relation(fields: [guaranteeId], references: [id])
  User               User               @relation(fields: [supporterId], references: [id])

  @@unique([guaranteeId, supporterId])
  @@index([guaranteeId])
  @@index([supporterId])
}

model HelpChain {
  id          String      @id
  initiatorId String
  status      ChainStatus
  story       String?
  createdAt   DateTime    @default(now())
  completedAt DateTime?
  ChainLink   ChainLink[]
  User        User        @relation(fields: [initiatorId], references: [id])

  @@index([status])
}

model HousingBooking {
  id               String           @id
  housingId        String
  guestId          String
  checkIn          DateTime
  checkOut         DateTime
  nights           Int
  guests           Int              @default(1)
  paidEur          Float?
  paidCredits      Int?
  paidHours        Float?
  status           BookingStatus    @default(PENDING)
  guestMessage     String?
  hostResponse     String?
  validated        Boolean          @default(false)
  witnessIds       String[]
  validatedAt      DateTime?
  guestRating      Int?
  guestReview      String?
  hostRating       Int?
  hostReview       String?
  canceledAt       DateTime?
  cancelReason     String?
  createdAt        DateTime         @default(now())
  updatedAt        DateTime
  User             User             @relation(fields: [guestId], references: [id])
  TemporaryHousing TemporaryHousing @relation(fields: [housingId], references: [id])

  @@index([checkIn])
  @@index([guestId])
  @@index([housingId])
  @@index([status])
}

model HousingCoop {
  id                  String                @id
  communityId         String?
  name                String
  description         String
  vision              String
  images              String[]
  type                CoopType
  address             String?
  lat                 Float?
  lng                 Float?
  locationConfirmed   Boolean               @default(false)
  minMembers          Int                   @default(5)
  maxMembers          Int
  currentMembers      Int                   @default(0)
  totalBudget         Float?
  currentFunds        Float                 @default(0)
  monthlyContribution Float?
  governance          GovernanceType
  decisionThreshold   Float                 @default(0.66)
  sharedSpaces        String[]
  privateSpaces       String[]
  communityRules      String[]
  entryCriteria       Json
  phase               CoopPhase             @default(FORMING)
  targetMoveIn        DateTime?
  status              CoopStatus            @default(OPEN)
  createdAt           DateTime              @default(now())
  updatedAt           DateTime
  Community           Community?            @relation(fields: [communityId], references: [id])
  HousingCoopMember   HousingCoopMember[]
  HousingCoopProposal HousingCoopProposal[]

  @@index([communityId])
  @@index([currentMembers, maxMembers])
  @@index([phase])
  @@index([status])
}

model HousingCoopMember {
  id                  String         @id
  coopId              String
  userId              String
  role                CoopMemberRole @default(MEMBER)
  status              MemberStatus   @default(PENDING)
  monthlyContribution Float?
  contributionType    ExchangeType   @default(EUR)
  totalContributed    Float          @default(0)
  commitmentLevel     String?
  skills              String[]
  availability        String?
  applicationMessage  String?
  approvedBy          String[]
  approvalVotes       Int            @default(0)
  rejectionVotes      Int            @default(0)
  joinedAt            DateTime?
  leftAt              DateTime?
  leaveReason         String?
  createdAt           DateTime       @default(now())
  updatedAt           DateTime
  HousingCoop         HousingCoop    @relation(fields: [coopId], references: [id])
  User                User           @relation(fields: [userId], references: [id])

  @@unique([coopId, userId])
  @@index([coopId])
  @@index([status])
  @@index([userId])
}

model HousingCoopProposal {
  id              String            @id
  coopId          String
  creatorId       String
  type            CoopProposalType
  title           String
  description     String
  budget          Float?
  timeline        String?
  implementation  String?
  applicantId     String?
  status          ProposalStatus    @default(DISCUSSION)
  votingStartsAt  DateTime?
  votingEndsAt    DateTime?
  requiredVotes   Int
  currentVotes    Int               @default(0)
  approvedAt      DateTime?
  rejectedAt      DateTime?
  implementedAt   DateTime?
  createdAt       DateTime          @default(now())
  updatedAt       DateTime
  HousingCoop     HousingCoop       @relation(fields: [coopId], references: [id])
  User            User              @relation(fields: [creatorId], references: [id])
  HousingCoopVote HousingCoopVote[]

  @@index([coopId])
  @@index([creatorId])
  @@index([status])
  @@index([type])
}

model HousingCoopVote {
  id                  String              @id
  proposalId          String
  voterId             String
  points              Int
  decision            VoteDecision
  reason              String?
  createdAt           DateTime            @default(now())
  HousingCoopProposal HousingCoopProposal @relation(fields: [proposalId], references: [id])
  User                User                @relation(fields: [voterId], references: [id])

  @@unique([proposalId, voterId])
  @@index([proposalId])
  @@index([voterId])
}

model ImpactReport {
  id                   String           @id
  projectId            String
  authorId             String
  title                String
  summary              String
  impactLevel          ImpactLevel
  beneficiariesReached Int
  jobsCreated          Int?
  co2Avoided           Float?
  waterLitersProvided  Float?
  peopleEducated       Int?
  customMetrics        Json?
  photos               String[]         @default([])
  videos               String[]         @default([])
  testimonials         Json[]           @default([])
  documents            String[]         @default([])
  sustainabilityPlan   String?
  futureGoals          String[]         @default([])
  isVerified           Boolean          @default(false)
  verifiedBy           String?
  verificationDocs     String[]         @default([])
  publishedAt          DateTime?
  createdAt            DateTime         @default(now())
  updatedAt            DateTime
  User                 User             @relation(fields: [authorId], references: [id])
  CommunityProject     CommunityProject @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([authorId])
  @@index([impactLevel])
  @@index([projectId])
  @@index([publishedAt])
}

model LayerMigration {
  id               String        @id
  userId           String
  fromLayer        EconomicLayer
  toLayer          EconomicLayer
  reason           String?
  creditsConverted Int?
  migratedAt       DateTime      @default(now())
  User             User          @relation(fields: [userId], references: [id])

  @@index([migratedAt])
  @@index([userId])
}

model LiveEvent {
  id                   String                 @id
  type                 String
  title                String
  description          String?
  prizes               Json
  status               LiveEventStatus        @default(ANNOUNCED)
  participants         Int                    @default(0)
  startsAt             DateTime
  endsAt               DateTime
  createdAt            DateTime               @default(now())
  LiveEventParticipant LiveEventParticipant[]

  @@index([startsAt])
  @@index([status])
}

model LiveEventParticipant {
  id        String    @id
  eventId   String
  userId    String
  joinedAt  DateTime  @default(now())
  score     Int?
  won       Boolean   @default(false)
  LiveEvent LiveEvent @relation(fields: [eventId], references: [id])
  User      User      @relation(fields: [userId], references: [id])

  @@unique([eventId, userId])
  @@index([eventId])
  @@index([userId])
}

model Match {
  id                       String   @id
  user1Id                  String
  user2Id                  String
  offerId                  String?
  isSuper                  Boolean  @default(false)
  chatOpened               Boolean  @default(false)
  createdAt                DateTime @default(now())
  Offer                    Offer?   @relation(fields: [offerId], references: [id])
  User_Match_user1IdToUser User     @relation("Match_user1IdToUser", fields: [user1Id], references: [id])
  User_Match_user2IdToUser User     @relation("Match_user2IdToUser", fields: [user2Id], references: [id])

  @@unique([user1Id, user2Id])
  @@index([user1Id])
  @@index([user2Id])
}

model MembershipRequest {
  id          String                  @id
  communityId String
  userId      String
  status      MembershipRequestStatus @default(PENDING)
  message     String?
  reviewedBy  String?
  reviewNote  String?
  createdAt   DateTime                @default(now())
  reviewedAt  DateTime?
  Community   Community               @relation(fields: [communityId], references: [id])

  @@unique([communityId, userId])
  @@index([communityId])
  @@index([status])
  @@index([userId])
}

model Merchant {
  id                  String           @id
  userId              String           @unique
  businessName        String
  nif                 String           @unique
  category            String
  description         String
  logo                String?
  images              String[]
  lat                 Float
  lng                 Float
  address             String
  phone               String?
  email               String?
  website             String?
  schedule            Json
  acceptsCredits      Boolean          @default(false)
  creditDiscount      Int              @default(20)
  supporters          Int              @default(0)
  sustainabilityScore Float?
  certifications      String[]
  verified            Boolean          @default(false)
  featured            Boolean          @default(false)
  createdAt           DateTime         @default(now())
  updatedAt           DateTime
  FlashDeal           FlashDeal[]
  User                User             @relation(fields: [userId], references: [id])
  MerchantImpact      MerchantImpact[]

  @@index([category])
  @@index([lat, lng])
}

model MerchantImpact {
  id              String   @id
  merchantId      String
  month           String
  localPurchases  Float
  creditsAccepted Int
  jobsCreated     Int      @default(0)
  localSuppliers  Int      @default(0)
  wasteReduced    Float    @default(0)
  communityEvents Int      @default(0)
  Merchant        Merchant @relation(fields: [merchantId], references: [id])

  @@unique([merchantId, month])
  @@index([month])
}

model Message {
  id                            String    @id
  senderId                      String
  receiverId                    String
  content                       String
  read                          Boolean   @default(false)
  metadata                      Json?
  createdAt                     DateTime  @default(now())
  readAt                        DateTime?
  User_Message_receiverIdToUser User      @relation("Message_receiverIdToUser", fields: [receiverId], references: [id])
  User_Message_senderIdToUser   User      @relation("Message_senderIdToUser", fields: [senderId], references: [id])

  @@index([createdAt])
  @@index([senderId, receiverId])
}

model MicroAction {
  id        String   @id
  userId    String
  action    String
  reward    Int
  metadata  Json?
  createdAt DateTime @default(now())
  User      User     @relation(fields: [userId], references: [id])

  @@index([action])
  @@index([createdAt])
  @@index([userId])
}

model ModerationDAO {
  id             String           @id
  contentId      String
  contentType    ContentType
  reportReason   String?
  reporterId     String?
  status         DAOStatus        @default(VOTING)
  quorum         Int              @default(5)
  deadline       DateTime
  finalDecision  String?
  executedAt     DateTime?
  createdAt      DateTime         @default(now())
  User           User?            @relation(fields: [reporterId], references: [id])
  ModerationVote ModerationVote[]

  @@index([contentType, contentId])
  @@index([deadline])
  @@index([status])
}

model ModerationVote {
  id            String             @id
  daoId         String
  voterId       String
  decision      ModerationDecision
  reason        String?
  weight        Float
  createdAt     DateTime           @default(now())
  ModerationDAO ModerationDAO      @relation(fields: [daoId], references: [id])
  User          User               @relation(fields: [voterId], references: [id])

  @@unique([daoId, voterId])
  @@index([daoId])
  @@index([voterId])
}

model Need {
  id                String         @id
  creatorId         String?
  communityId       String?
  scope             NeedScope
  category          NeedCategory
  type              NeedType
  title             String
  description       String
  images            String[]       @default([])
  location          String?
  latitude          Float?
  longitude         Float?
  country           String?
  resourceTypes     ResourceType[]
  targetEur         Float?
  targetCredits     Int?
  targetHours       Float?
  neededSkills      String[]       @default([])
  neededMaterials   Json?
  currentEur        Float          @default(0)
  currentCredits    Int            @default(0)
  currentHours      Float          @default(0)
  contributorsCount Int            @default(0)
  urgencyLevel      Int            @default(1)
  deadline          DateTime?
  status            NeedStatus     @default(OPEN)
  verificationDocs  String[]       @default([])
  isVerified        Boolean        @default(false)
  verifiedBy        String?
  verifiedAt        DateTime?
  relatedOffers     String[]       @default([])
  createdAt         DateTime       @default(now())
  updatedAt         DateTime
  closedAt          DateTime?
  Contribution      Contribution[]
  Community         Community?     @relation(fields: [communityId], references: [id])
  User              User?          @relation(fields: [creatorId], references: [id])

  @@index([category])
  @@index([communityId])
  @@index([creatorId])
  @@index([deadline])
  @@index([latitude, longitude])
  @@index([scope])
  @@index([status])
  @@index([type])
}

model NeedExpression {
  id              String    @id
  communityId     String?
  requesterId     String?
  what            String
  why             String?
  where           String?
  urgency         String?
  visibleToLayers String[]
  fulfilledBy     String[]
  fulfilledAt     DateTime?
  createdAt       DateTime  @default(now())
  expiresAt       DateTime?

  @@index([communityId])
  @@index([createdAt])
}

model Notification {
  id        String           @id
  userId    String
  type      NotificationType
  title     String
  body      String
  data      Json?
  read      Boolean          @default(false)
  actionUrl String?
  createdAt DateTime         @default(now())
  readAt    DateTime?
  link      String?
  User      User             @relation(fields: [userId], references: [id])

  @@index([createdAt])
  @@index([type])
  @@index([userId, read])
}

model Offer {
  id            String          @id
  userId        String
  type          OfferType
  category      String
  title         String
  description   String
  images        String[]
  priceEur      Float?
  priceCredits  Int?
  stock         Int?
  lat           Float?
  lng           Float?
  address       String?
  tags          String[]
  status        OfferStatus     @default(ACTIVE)
  featured      Boolean         @default(false)
  views         Int             @default(0)
  interested    Int             @default(0)
  supporters    Int             @default(0)
  shares        Int             @default(0)
  expiresAt     DateTime?
  createdAt     DateTime        @default(now())
  updatedAt     DateTime
  communityId   String?
  Event         Event?
  GroupBuy      GroupBuy?
  Match         Match[]
  Community     Community?      @relation(fields: [communityId], references: [id])
  User          User            @relation(fields: [userId], references: [id])
  OfferInterest OfferInterest[]
  OrderItem     OrderItem[]
  Post          Post[]
  SavedOffer    SavedOffer[]
  Swipe         Swipe[]
  TimeBankOffer TimeBankOffer?

  @@index([category])
  @@index([communityId])
  @@index([createdAt])
  @@index([lat, lng])
  @@index([status])
  @@index([type])
  @@index([userId])
}

model OfferInterest {
  id           String   @id
  userId       String
  offerId      String
  interestedAt DateTime @default(now())
  Offer        Offer    @relation(fields: [offerId], references: [id])
  User         User     @relation(fields: [userId], references: [id])

  @@unique([userId, offerId])
  @@index([offerId])
  @@index([userId])
}

model OnboardingProgress {
  id             String    @id
  userId         String    @unique
  currentStep    Int       @default(1)
  completed      Boolean   @default(false)
  completedSteps Json      @default("[]")
  createdAt      DateTime  @default(now())
  updatedAt      DateTime
  completedAt    DateTime?
  User           User      @relation(fields: [userId], references: [id])

  @@index([completed])
  @@index([userId])
}

model Order {
  id            String        @id
  buyerId       String
  totalEur      Float
  totalCredits  Int
  paymentMethod PaymentMethod
  pickupLat     Float?
  pickupLng     Float?
  pickupAddress String?
  pickupTime    DateTime?
  status        OrderStatus
  notes         String?
  createdAt     DateTime      @default(now())
  updatedAt     DateTime
  completedAt   DateTime?
  User          User          @relation(fields: [buyerId], references: [id])
  OrderItem     OrderItem[]
  Payment       Payment?

  @@index([buyerId])
  @@index([createdAt])
  @@index([status])
}

model OrderItem {
  id           String  @id
  orderId      String
  offerId      String
  quantity     Int
  priceEur     Float
  priceCredits Int
  notes        String?
  Offer        Offer   @relation(fields: [offerId], references: [id])
  Order        Order   @relation(fields: [orderId], references: [id])

  @@index([offerId])
  @@index([orderId])
}

model Payment {
  id        String        @id
  orderId   String        @unique
  amount    Float
  currency  String        @default("EUR")
  method    PaymentMethod
  status    PaymentStatus
  stripeId  String?
  metadata  Json?
  createdAt DateTime      @default(now())
  Order     Order         @relation(fields: [orderId], references: [id])
}

model PoolContribution {
  id            String        @id
  userId        String
  poolId        String
  amount        Int
  reason        String?
  createdAt     DateTime      @default(now())
  CommunityPool CommunityPool @relation(fields: [poolId], references: [id])
  User          User          @relation(fields: [userId], references: [id])

  @@index([createdAt])
  @@index([poolId])
  @@index([userId])
}

model PoolRequest {
  id              String            @id
  userId          String
  poolId          String
  amount          Int
  reason          String
  status          RequestStatus     @default(PENDING)
  approvedBy      String?
  approvedAt      DateTime?
  rejectedBy      String?
  rejectedAt      DateTime?
  distributedAt   DateTime?
  createdAt       DateTime          @default(now())
  updatedAt       DateTime
  CommunityPool   CommunityPool     @relation(fields: [poolId], references: [id])
  User            User              @relation(fields: [userId], references: [id])
  PoolRequestVote PoolRequestVote[]

  @@index([createdAt])
  @@index([poolId])
  @@index([status])
  @@index([userId])
}

model PoolRequestVote {
  id          String      @id
  requestId   String
  voterId     String
  vote        Boolean
  comment     String?
  createdAt   DateTime    @default(now())
  PoolRequest PoolRequest @relation(fields: [requestId], references: [id], onDelete: Cascade)
  User        User        @relation(fields: [voterId], references: [id])

  @@unique([requestId, voterId])
  @@index([createdAt])
  @@index([requestId])
  @@index([voterId])
}

model Post {
  id             String     @id
  authorId       String
  content        String
  images         String[]
  lat            Float?
  lng            Float?
  type           PostType
  visibility     Visibility
  tags           String[]
  mentions       String[]
  relatedOfferId String?
  thanksCount    Int        @default(0)
  supportsCount  Int        @default(0)
  commentsCount  Int        @default(0)
  sharesCount    Int        @default(0)
  helpedCount    Int        @default(0)
  createdAt      DateTime   @default(now())
  updatedAt      DateTime
  editedAt       DateTime?
  Comment        Comment[]
  User           User       @relation(fields: [authorId], references: [id])
  Offer          Offer?     @relation(fields: [relatedOfferId], references: [id])
  Reaction       Reaction[]

  @@index([authorId])
  @@index([createdAt])
  @@index([type])
  @@index([visibility])
}

model PriceBreak {
  id           String   @id
  groupBuyId   String
  minQuantity  Int
  pricePerUnit Float
  savings      Float
  GroupBuy     GroupBuy @relation(fields: [groupBuyId], references: [id])

  @@index([groupBuyId])
}

model ProjectPhase {
  id               String           @id
  projectId        String
  name             String
  description      String
  order            Int
  targetEur        Float?
  targetCredits    Int?
  targetHours      Float?
  currentEur       Float            @default(0)
  currentCredits   Int              @default(0)
  currentHours     Float            @default(0)
  startDate        DateTime?
  endDate          DateTime?
  status           PhaseStatus      @default(PENDING)
  completionRate   Float            @default(0.0)
  createdAt        DateTime         @default(now())
  updatedAt        DateTime
  completedAt      DateTime?
  CommunityProject CommunityProject @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([projectId])
  @@index([status])
}

model ProjectUpdate {
  id                   String           @id
  projectId            String
  authorId             String
  title                String
  content              String
  images               String[]         @default([])
  videoUrl             String?
  progressUpdate       Float?
  fundsUsed            Float?
  beneficiariesReached Int?
  milestones           String[]         @default([])
  challenges           String?
  nextSteps            String?
  createdAt            DateTime         @default(now())
  updatedAt            DateTime
  User                 User             @relation(fields: [authorId], references: [id])
  CommunityProject     CommunityProject @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([authorId])
  @@index([createdAt])
  @@index([projectId])
}

model Proposal {
  id                 String            @id
  blockId            String            @unique
  authorId           String
  type               ProposalType
  title              String
  description        String
  requiredBudget     Float?
  implementationPlan String?
  status             ProposalStatus    @default(DISCUSSION)
  discussionDeadline DateTime
  votingDeadline     DateTime
  createdAt          DateTime          @default(now())
  updatedAt          DateTime
  User               User              @relation(fields: [authorId], references: [id])
  TrustBlock         TrustBlock        @relation(fields: [blockId], references: [id])
  ProposalComment    ProposalComment[]
  ProposalVote       ProposalVote[]

  @@index([authorId])
  @@index([status])
  @@index([votingDeadline])
}

model ProposalComment {
  id                    String            @id
  proposalId            String
  authorId              String
  content               String
  parentId              String?
  createdAt             DateTime          @default(now())
  updatedAt             DateTime
  User                  User              @relation(fields: [authorId], references: [id])
  ProposalComment       ProposalComment?  @relation("ProposalCommentToProposalComment", fields: [parentId], references: [id])
  other_ProposalComment ProposalComment[] @relation("ProposalCommentToProposalComment")
  Proposal              Proposal          @relation(fields: [proposalId], references: [id])

  @@index([authorId])
  @@index([parentId])
  @@index([proposalId])
}

model ProposalVote {
  id         String   @id
  proposalId String
  voterId    String
  points     Int
  cost       Int
  createdAt  DateTime @default(now())
  updatedAt  DateTime
  Proposal   Proposal @relation(fields: [proposalId], references: [id])
  User       User     @relation(fields: [voterId], references: [id])

  @@unique([proposalId, voterId])
  @@index([proposalId])
  @@index([voterId])
}

model Reaction {
  id        String       @id
  postId    String
  userId    String
  type      ReactionType
  createdAt DateTime     @default(now())
  Post      Post         @relation(fields: [postId], references: [id])
  User      User         @relation(fields: [userId], references: [id])

  @@unique([postId, userId, type])
}

model Referral {
  id             String       @id
  codeId         String
  referredUserId String
  rewardGranted  Boolean      @default(false)
  bonusGranted   Boolean      @default(false)
  createdAt      DateTime     @default(now())
  ReferralCode   ReferralCode @relation(fields: [codeId], references: [id])
  User           User         @relation(fields: [referredUserId], references: [id])

  @@index([codeId])
  @@index([referredUserId])
}

model ReferralCode {
  id                      String     @id
  userId                  String
  code                    String     @unique
  rewardForReferrer       Int
  rewardForReferred       Int
  bonusOnFirstTransaction Int
  usedCount               Int        @default(0)
  maxUses                 Int?
  expiresAt               DateTime?
  createdAt               DateTime   @default(now())
  Referral                Referral[]
  User                    User       @relation(fields: [userId], references: [id])

  @@index([code])
  @@index([userId])
}

model RefreshToken {
  id        String    @id
  token     String    @unique
  userId    String
  expiresAt DateTime
  createdAt DateTime  @default(now())
  revokedAt DateTime?
  User      User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([expiresAt])
  @@index([token])
  @@index([userId])
}

model ReplicationCase {
  id              String                 @id
  communityId     String
  packType        OrganizedCommunityType
  title           String
  description     String
  location        String
  membersCount    Int
  monthsActive    Int
  keyMetrics      Json                   @default("{}")
  challenges      String[]               @default([])
  solutions       String[]               @default([])
  videoUrl        String?
  guideUrl        String?
  contactEmail    String?
  mentorAvailable Boolean                @default(false)
  featured        Boolean                @default(false)
  publishedAt     DateTime?
  createdAt       DateTime               @default(now())
  updatedAt       DateTime

  @@index([featured])
  @@index([packType])
  @@index([publishedAt])
}

model Report {
  id                           String       @id
  reporterId                   String
  reportedId                   String
  reportedType                 ReportedType
  reason                       ReportReason
  description                  String?
  status                       ReportStatus @default(PENDING)
  resolution                   String?
  createdAt                    DateTime     @default(now())
  resolvedAt                   DateTime?
  User_Report_reportedIdToUser User         @relation("Report_reportedIdToUser", fields: [reportedId], references: [id])
  User_Report_reporterIdToUser User         @relation("Report_reporterIdToUser", fields: [reporterId], references: [id])

  @@index([reportedType])
  @@index([status])
}

model Review {
  id               String     @id
  reviewerId       String
  reviewType       ReviewType
  reviewedEntityId String
  rating           Int
  comment          String?
  transactionId    String?
  createdAt        DateTime   @default(now())
  updatedAt        DateTime
  User             User       @relation(fields: [reviewerId], references: [id])

  @@unique([reviewerId, reviewType, reviewedEntityId])
  @@index([reviewType, reviewedEntityId])
  @@index([reviewerId])
}

model SavedOffer {
  id      String   @id
  userId  String
  offerId String
  savedAt DateTime @default(now())
  Offer   Offer    @relation(fields: [offerId], references: [id])

  @@unique([userId, offerId])
  @@index([offerId])
}

model SemillaTransaction {
  id                                   String                   @id
  fromDID                              String
  fromId                               String?
  toDID                                String
  toId                                 String?
  amount                               Float
  fee                                  Float                    @default(0)
  type                                 SemillaTransactionType
  reason                               String
  metadata                             Json                     @default("{}")
  status                               SemillaTransactionStatus @default(PENDING)
  errorMessage                         String?
  blockchainHash                       String?                  @unique
  blockNumber                          Int?
  createdAt                            DateTime                 @default(now())
  completedAt                          DateTime?
  User_SemillaTransaction_fromIdToUser User?                    @relation("SemillaTransaction_fromIdToUser", fields: [fromId], references: [id])
  User_SemillaTransaction_toIdToUser   User?                    @relation("SemillaTransaction_toIdToUser", fields: [toId], references: [id])

  @@index([createdAt])
  @@index([fromDID])
  @@index([fromId])
  @@index([toDID])
  @@index([toId])
  @@index([type])
}

model Skill {
  id            String          @id
  userId        String
  category      String
  name          String
  description   String?
  verified      Boolean         @default(false)
  endorsements  Int             @default(0)
  User          User            @relation(fields: [userId], references: [id])
  TimeBankOffer TimeBankOffer[]

  @@unique([userId, name])
  @@index([category])
}

model SpaceBank {
  id                 String         @id
  ownerId            String
  communityId        String?
  type               SpaceType
  title              String
  description        String
  images             String[]
  address            String?
  lat                Float?
  lng                Float?
  accessInstructions String?
  capacity           Int?
  squareMeters       Float?
  features           String[]
  equipment          String[]
  availableDays      String[]
  availableHours     Json
  minBookingHours    Float          @default(1)
  maxBookingHours    Float?
  exchangeType       ExchangeType
  pricePerHour       Float?
  creditsPerHour     Int?
  hoursPerHour       Float?
  isFree             Boolean        @default(false)
  minReputation      Int            @default(0)
  requiresApproval   Boolean        @default(false)
  rules              String[]
  status             SpaceStatus    @default(ACTIVE)
  createdAt          DateTime       @default(now())
  updatedAt          DateTime
  Community          Community?     @relation(fields: [communityId], references: [id])
  User               User           @relation(fields: [ownerId], references: [id])
  SpaceBooking       SpaceBooking[]

  @@index([communityId])
  @@index([lat, lng])
  @@index([ownerId])
  @@index([status])
  @@index([type])
}

model SpaceBooking {
  id           String        @id
  spaceId      String
  bookerId     String
  startTime    DateTime
  endTime      DateTime
  hours        Float
  paidEur      Float?
  paidCredits  Int?
  paidHours    Float?
  status       BookingStatus @default(PENDING)
  validated    Boolean       @default(false)
  witnessIds   String[]
  validatedAt  DateTime?
  rating       Int?
  review       String?
  canceledAt   DateTime?
  cancelReason String?
  createdAt    DateTime      @default(now())
  updatedAt    DateTime
  User         User          @relation(fields: [bookerId], references: [id])
  SpaceBank    SpaceBank     @relation(fields: [spaceId], references: [id])

  @@index([bookerId])
  @@index([spaceId])
  @@index([startTime])
  @@index([status])
}

model Story {
  id            String          @id
  userId        String
  type          StoryType
  content       String
  media         String?
  cta           Json?
  views         Int             @default(0)
  expiresAt     DateTime
  createdAt     DateTime        @default(now())
  User          User            @relation(fields: [userId], references: [id])
  StoryReaction StoryReaction[]
  StoryView     StoryView[]

  @@index([createdAt])
  @@index([expiresAt])
  @@index([userId])
}

model StoryReaction {
  id        String   @id
  storyId   String
  userId    String
  reaction  String
  createdAt DateTime @default(now())
  Story     Story    @relation(fields: [storyId], references: [id], onDelete: Cascade)
  User      User     @relation(fields: [userId], references: [id])

  @@unique([storyId, userId])
  @@index([storyId])
  @@index([userId])
}

model StoryView {
  id       String   @id
  storyId  String
  userId   String
  viewedAt DateTime @default(now())
  Story    Story    @relation(fields: [storyId], references: [id], onDelete: Cascade)
  User     User     @relation(fields: [userId], references: [id])

  @@unique([storyId, userId])
  @@index([storyId])
}

model Swipe {
  id        String         @id
  userId    String
  offerId   String
  direction SwipeDirection
  createdAt DateTime       @default(now())
  Offer     Offer          @relation(fields: [offerId], references: [id])
  User      User           @relation(fields: [userId], references: [id])

  @@unique([userId, offerId])
  @@index([createdAt])
  @@index([offerId])
  @@index([userId])
}

model SystemConfig {
  id          String   @id
  key         String   @unique
  value       Json
  description String?
  updatedAt   DateTime
}

model TemporaryHousing {
  id                 String            @id
  hostId             String
  communityId        String?
  type               HousingType
  title              String
  description        String
  images             String[]
  address            String?
  lat                Float?
  lng                Float?
  accessInstructions String?
  accommodationType  AccommodationType
  beds               Int               @default(1)
  bathrooms          Float             @default(1)
  squareMeters       Float?
  amenities          String[]
  houseRules         String[]
  availableFrom      DateTime
  availableTo        DateTime
  minNights          Int               @default(1)
  maxNights          Int?
  exchangeType       ExchangeType
  pricePerNight      Float?
  creditsPerNight    Int?
  hoursPerNight      Float?
  isFree             Boolean           @default(false)
  minReputation      Int               @default(10)
  requiresApproval   Boolean           @default(true)
  maxGuests          Int               @default(1)
  communityInsured   Boolean           @default(true)
  emergencyContact   String?
  status             HousingStatus     @default(ACTIVE)
  createdAt          DateTime          @default(now())
  updatedAt          DateTime
  HousingBooking     HousingBooking[]
  Community          Community?        @relation(fields: [communityId], references: [id])
  User               User              @relation(fields: [hostId], references: [id])

  @@index([availableFrom, availableTo])
  @@index([communityId])
  @@index([hostId])
  @@index([lat, lng])
  @@index([status])
  @@index([type])
}

model TimeBankOffer {
  id                  String                @id
  offerId             String                @unique
  skillId             String?
  estimatedHours      Float
  canTeach            Boolean               @default(false)
  maxStudents         Int?
  experienceLevel     ExperienceLevel
  toolsNeeded         String[]
  Offer               Offer                 @relation(fields: [offerId], references: [id])
  Skill               Skill?                @relation(fields: [skillId], references: [id])
  TimeBankTransaction TimeBankTransaction[]
}

model TimeBankTransaction {
  id                                         String            @id
  requesterId                                String
  providerId                                 String
  offerId                                    String?
  description                                String
  hours                                      Float
  credits                                    Int
  scheduledFor                               DateTime
  completedAt                                DateTime?
  status                                     TransactionStatus
  requesterRating                            Int?
  requesterComment                           String?
  providerRating                             Int?
  providerComment                            String?
  impactStory                                String?
  chainedFavor                               Boolean           @default(false)
  createdAt                                  DateTime          @default(now())
  updatedAt                                  DateTime
  TimeBankOffer                              TimeBankOffer?    @relation(fields: [offerId], references: [id])
  User_TimeBankTransaction_providerIdToUser  User              @relation("TimeBankTransaction_providerIdToUser", fields: [providerId], references: [id])
  User_TimeBankTransaction_requesterIdToUser User              @relation("TimeBankTransaction_requesterIdToUser", fields: [requesterId], references: [id])

  @@index([providerId])
  @@index([requesterId])
  @@index([scheduledFor])
  @@index([status])
}

model TrustBlock {
  id              String            @id
  height          Int               @unique
  hash            String            @unique
  previousHash    String
  type            BlockType
  actorId         String
  content         Json
  nonce           Int
  difficulty      Int
  timestamp       DateTime
  status          BlockStatus       @default(PENDING)
  BlockValidation BlockValidation[]
  Proposal        Proposal?
  User            User              @relation(fields: [actorId], references: [id])

  @@index([actorId])
  @@index([height])
  @@index([status])
  @@index([timestamp])
}

model User {
  id                                                        String                    @id
  email                                                     String                    @unique
  phone                                                     String?                   @unique
  password                                                  String
  name                                                      String
  bio                                                       String?
  avatar                                                    String?
  role                                                      UserRole                  @default(CITIZEN)
  emailVerified                                             Boolean                   @default(false)
  phoneVerified                                             Boolean                   @default(false)
  lat                                                       Float?
  lng                                                       Float?
  address                                                   String?
  neighborhood                                              String?
  searchRadius                                              Int                       @default(5)
  credits                                                   Int                       @default(0)
  level                                                     Int                       @default(1)
  experience                                                Int                       @default(0)
  activeStreak                                              Int                       @default(0)
  lastActiveAt                                              DateTime                  @default(now())
  totalSaved                                                Float                     @default(0)
  hoursShared                                               Float                     @default(0)
  hoursReceived                                             Float                     @default(0)
  co2Avoided                                                Float                     @default(0)
  peopleHelped                                              Int                       @default(0)
  peopleHelpedBy                                            Int                       @default(0)
  connectionsCount                                          Int                       @default(0)
  language                                                  String                    @default("es")
  notificationPreferences                                   Json                      @default("{}")
  privacy                                                   Json                      @default("{}")
  interests                                                 String[]
  weeklyMood                                                WeeklyMood?
  dailySeeds                                                Boolean                   @default(true)
  createdAt                                                 DateTime                  @default(now())
  updatedAt                                                 DateTime
  deletedAt                                                 DateTime?
  voteCredits                                               Int                       @default(10)
  backupCodes                                               String[]                  @default([])
  communityId                                               String?
  consciousnessLevel                                        Int                       @default(1)
  dailyActions                                              Int                       @default(0)
  economicLayer                                             EconomicLayer             @default(TRADITIONAL)
  flowPower                                                 Float                     @default(1.0)
  gailuDID                                                  String?                   @unique
  gailuNodeId                                               String?
  generosityScore                                           Float                     @default(0.0)
  isEmailVerified                                           Boolean                   @default(false)
  lastDemurrageAt                                           DateTime                  @default(now())
  lastLayerChange                                           DateTime?
  layerConfig                                               Json                      @default("{}")
  proofOfHelpScore                                          Float                     @default(0)
  semillaBalance                                            Float                     @default(0)
  softCredits                                               Int?
  twoFactorEnabled                                          Boolean                   @default(false)
  twoFactorSecret                                           String?
  walletAddress                                             String?                   @unique
  walletType                                                String?
  telegramUsername                                          String?
  whatsappNumber                                            String?
  contactPreference                                         ContactMethod             @default(APP)
  BlockValidation                                           BlockValidation[]
  BridgeTransaction                                         BridgeTransaction[]
  ChainLink_ChainLink_fromUserIdToUser                      ChainLink[]               @relation("ChainLink_fromUserIdToUser")
  ChainLink_ChainLink_toUserIdToUser                        ChainLink[]               @relation("ChainLink_toUserIdToUser")
  ChallengeParticipant                                      ChallengeParticipant[]
  CirculoParticipacion                                      CirculoParticipacion[]
  Comment                                                   Comment[]
  CommunityGuarantee                                        CommunityGuarantee[]
  CommunityProject                                          CommunityProject[]
  Connection_Connection_connectedIdToUser                   Connection[]              @relation("Connection_connectedIdToUser")
  Connection_Connection_userIdToUser                        Connection[]              @relation("Connection_userIdToUser")
  Contribution                                              Contribution[]
  CreditTransaction                                         CreditTransaction[]
  Event                                                     Event[]
  EventAttendee                                             EventAttendee[]
  FederatedActivity                                         FederatedActivity[]
  FlashDealRedemption                                       FlashDealRedemption[]
  FlowTransaction_FlowTransaction_fromUserIdToUser          FlowTransaction[]         @relation("FlowTransaction_fromUserIdToUser")
  FlowTransaction_FlowTransaction_toUserIdToUser            FlowTransaction[]         @relation("FlowTransaction_toUserIdToUser")
  GroupBuyOrder                                             GroupBuyOrder[]
  GroupBuyParticipant                                       GroupBuyParticipant[]
  GuaranteeSupporter                                        GuaranteeSupporter[]
  HelpChain                                                 HelpChain[]
  HousingBooking                                            HousingBooking[]
  HousingCoopMember                                         HousingCoopMember[]
  HousingCoopProposal                                       HousingCoopProposal[]
  HousingCoopVote                                           HousingCoopVote[]
  ImpactReport                                              ImpactReport[]
  LayerMigration                                            LayerMigration[]
  LiveEventParticipant                                      LiveEventParticipant[]
  Match_Match_user1IdToUser                                 Match[]                   @relation("Match_user1IdToUser")
  Match_Match_user2IdToUser                                 Match[]                   @relation("Match_user2IdToUser")
  Merchant                                                  Merchant?
  Message_Message_receiverIdToUser                          Message[]                 @relation("Message_receiverIdToUser")
  Message_Message_senderIdToUser                            Message[]                 @relation("Message_senderIdToUser")
  MicroAction                                               MicroAction[]
  ModerationDAO                                             ModerationDAO[]
  ModerationVote                                            ModerationVote[]
  Need                                                      Need[]
  Notification                                              Notification[]
  Offer                                                     Offer[]
  OfferInterest                                             OfferInterest[]
  OnboardingProgress                                        OnboardingProgress?
  Order                                                     Order[]
  PoolContribution                                          PoolContribution[]
  PoolRequest                                               PoolRequest[]
  PoolRequestVote                                           PoolRequestVote[]
  Post                                                      Post[]
  ProjectUpdate                                             ProjectUpdate[]
  Proposal                                                  Proposal[]
  ProposalComment                                           ProposalComment[]
  ProposalVote                                              ProposalVote[]
  Reaction                                                  Reaction[]
  Referral                                                  Referral[]
  ReferralCode                                              ReferralCode[]
  RefreshToken                                              RefreshToken[]
  Report_Report_reportedIdToUser                            Report[]                  @relation("Report_reportedIdToUser")
  Report_Report_reporterIdToUser                            Report[]                  @relation("Report_reporterIdToUser")
  Review                                                    Review[]
  SemillaTransaction_SemillaTransaction_fromIdToUser        SemillaTransaction[]      @relation("SemillaTransaction_fromIdToUser")
  SemillaTransaction_SemillaTransaction_toIdToUser          SemillaTransaction[]      @relation("SemillaTransaction_toIdToUser")
  Skill                                                     Skill[]
  SpaceBank                                                 SpaceBank[]
  SpaceBooking                                              SpaceBooking[]
  Story                                                     Story[]
  StoryReaction                                             StoryReaction[]
  StoryView                                                 StoryView[]
  Swipe                                                     Swipe[]
  TemporaryHousing                                          TemporaryHousing[]
  TimeBankTransaction_TimeBankTransaction_providerIdToUser  TimeBankTransaction[]     @relation("TimeBankTransaction_providerIdToUser")
  TimeBankTransaction_TimeBankTransaction_requesterIdToUser TimeBankTransaction[]     @relation("TimeBankTransaction_requesterIdToUser")
  TrustBlock                                                TrustBlock[]
  Community                                                 Community?                @relation(fields: [communityId], references: [id])
  UserBadge                                                 UserBadge[]
  UserDailySeedCompletion                                   UserDailySeedCompletion[]
  UserFeatureUnlock                                         UserFeatureUnlock[]

  @@index([communityId])
  @@index([email])
  @@index([generosityScore])
  @@index([lastActiveAt])
  @@index([lat, lng])
  @@index([neighborhood])
  @@index([phone])
}

model UserBadge {
  id        String    @id
  userId    String
  badgeType BadgeType
  earnedAt  DateTime  @default(now())
  metadata  Json?
  isNew     Boolean   @default(true)
  progress  Int       @default(0)
  User      User      @relation(fields: [userId], references: [id])

  @@unique([userId, badgeType])
  @@index([userId])
}

model UserDailySeedCompletion {
  id             String    @id
  userId         String
  dailySeedId    String
  completedAt    DateTime  @default(now())
  creditsAwarded Int
  DailySeed      DailySeed @relation(fields: [dailySeedId], references: [id])
  User           User      @relation(fields: [userId], references: [id])

  @@unique([userId, dailySeedId])
  @@index([dailySeedId])
  @@index([userId])
}

model UserFeatureUnlock {
  id         String   @id
  userId     String
  feature    String
  unlockedAt DateTime @default(now())
  User       User     @relation(fields: [userId], references: [id])

  @@unique([userId, feature])
  @@index([userId])
}

model WeeklyChallenge {
  id                   String                 @id
  type                 String
  title                String
  description          String
  targetValue          Int
  reward               Int
  bonusFirst           Int
  participants         Int                    @default(0)
  startsAt             DateTime
  endsAt               DateTime
  createdAt            DateTime               @default(now())
  ChallengeParticipant ChallengeParticipant[]

  @@index([endsAt])
  @@index([startsAt])
}

model blacklist {
  id        String    @id
  type      String
  value     String    @unique
  reason    String
  active    Boolean   @default(true)
  addedAt   DateTime  @default(now())
  addedBy   String?
  removedAt DateTime?
  removedBy String?

  @@index([type, active])
  @@index([value])
}

model security_events {
  id         String    @id
  type       String
  severity   String
  details    Json
  timestamp  DateTime  @default(now())
  resolved   Boolean   @default(false)
  resolvedAt DateTime?
  resolvedBy String?
  notes      String?

  @@index([timestamp])
  @@index([type, severity])
}

enum AccommodationType {
  PRIVATE_ROOM
  SHARED_ROOM
  ENTIRE_PLACE
  COUCH
}

enum ActivityType {
  CREATE
  ANNOUNCE
  LIKE
  FOLLOW
  ACCEPT
  REJECT
  UPDATE
  DELETE
  OFFER_SERVICE
  REQUEST_HELP
  COMPLETE_EXCHANGE
}

enum ActivityVisibility {
  PUBLIC
  FEDERATED
  COMMUNITY
  PRIVATE
}

enum AttendeeRole {
  PARTICIPANT
  VOLUNTEER
  ORGANIZER
  SPEAKER
}

enum BadgeType {
  HELPER_10
  HELPER_50
  HELPER_100
  HELPER_500
  HELPER_1000
  TIME_GIVER_10
  TIME_GIVER_50
  TIME_GIVER_100
  TIME_GIVER_500
  TIME_GIVER_1000
  ORGANIZER_FIRST
  ORGANIZER_5
  ORGANIZER_20
  ORGANIZER_50
  ECO_STARTER
  ECO_WARRIOR
  ECO_CHAMPION
  ECO_LEGEND
  CONNECTOR_10
  CONNECTOR_50
  CONNECTOR_100
  LEARNER_FIRST
  LEARNER_5
  LEARNER_20
  TEACHER_FIRST
  TEACHER_10
  TEACHER_50
  TEACHER_100
  SAVER_100
  SAVER_500
  SAVER_1000
  SAVER_5000
  PIONEER
  VETERAN
  LEGEND
  VOTER_FIRST
  VOTER_10
  VOTER_50
  PROPOSER_FIRST
  PROPOSER_APPROVED
  MODERATOR_FAIR
  MODERATOR_TRUSTED
  INFLUENCER_100
  INFLUENCER_1000
  STORYTELLER
  GIFT_GIVER_FIRST
  GIFT_GIVER_100
  GIFT_RECEIVER
  ABUNDANCE_SHARER
  HOST_FIRST
  HOST_10
  HOST_50
  TRAVELER
  GROUPBUY_FIRST
  GROUPBUY_ORGANIZER
  GROUPBUY_VETERAN
  CHALLENGER
  CHALLENGER_MASTER
  STREAK_7
  STREAK_30
  STREAK_100
  EARLY_BIRD
  NIGHT_OWL
  REFERRER_FIRST
  REFERRER_10
  REFERRER_50
  UNICORN
  PHILOSOPHER
  RAINBOW
  SHAPESHIFTER
  CONSENSUS_PIONEER
  BLOCKCHAIN_BRIDGE
  LEVEL_10
  LEVEL_25
  LEVEL_50
  LEVEL_100
}

enum BlockStatus {
  PENDING
  APPROVED
  REJECTED
}

enum BlockType {
  HELP
  PROPOSAL
  VALIDATION
  DISPUTE
}

enum BookingStatus {
  PENDING
  APPROVED
  CONFIRMED
  CHECKED_IN
  COMPLETED
  CANCELED
  REJECTED
}

enum BridgeChain {
  POLYGON
  SOLANA
  ARBITRUM
  OPTIMISM
  BSC
  AVALANCHE
}

enum BridgeDirection {
  LOCK
  UNLOCK
}

enum BridgeEventType {
  GIFT_DAY
  DEBT_AMNESTY
  ABUNDANCE_FEST
  LAYER_EXPERIMENT
}

enum BridgeStatus {
  PENDING
  LOCKED
  MINTED
  BURNED
  UNLOCKED
  FAILED
}

enum BridgeType {
  GEOGRAPHIC
  THEMATIC
  SUPPLY_CHAIN
  MENTORSHIP
  FEDERATION
  SPONTANEOUS
}

enum ChainStatus {
  ACTIVE
  COMPLETED
  BROKEN
}

enum CirculoStatus {
  FORMING
  ACTIVE
  PAUSED
  COMPLETED
  ARCHIVED
}

enum CirculoType {
  PERSONAL
  RELACIONAL
  CULTURAL
  ECOLOGICO
  ESPIRITUAL
  ACTIVISMO
  MIXTO
}

enum CommunityBridgeStatus {
  PENDING
  ACTIVE
  INACTIVE
  DISSOLVED
}

enum CommunityType {
  NEIGHBORHOOD
  VILLAGE
  TOWN
  COUNTY
  REGION
  CUSTOM
}

enum CommunityVisibility {
  PRIVATE
  PUBLIC
  OPEN
  FEDERATED
}

enum ConnectionStatus {
  PENDING
  APPROVED
  REJECTED
  SUSPENDED
}

enum ConnectionType {
  NEIGHBOR
  HELPER
  HELPED_BY
  FRIEND
  BLOCKED
}

enum ContentType {
  POST
  OFFER
  COMMENT
  MESSAGE
  REVIEW
  COMMUNITY
  EVENT
  TIMEBANK
}

enum ContributionStatus {
  PENDING
  ACTIVE
  COMPLETED
  REFUNDED
  CANCELLED
}

enum ContributionType {
  MONETARY
  TIME
  SKILLS
  MATERIALS
  EQUIPMENT
  MIXED
}

enum CoopMemberRole {
  FOUNDER
  COORDINATOR
  MEMBER
  CANDIDATE
}

enum CoopPhase {
  FORMING
  FUNDING
  PROPERTY_SEARCH
  PURCHASING
  BUILDING
  MOVE_IN
  ESTABLISHED
}

enum CoopProposalType {
  MEMBER_APPLICATION
  BUDGET_ALLOCATION
  PROPERTY_SELECTION
  DESIGN_DECISION
  RULE_CHANGE
  MAJOR_EXPENSE
  CONFLICT_RESOLUTION
  OTHER
}

enum CoopStatus {
  OPEN
  CLOSED
  FULL
  ACTIVE
  ARCHIVED
}

enum CoopType {
  RENT_COLLECTIVE
  BUY_COLLECTIVE
  COMMUNITY_LAND_TRUST
  COHOUSING
  RETROFIT
}

enum CreditReason {
  TIME_BANK_HOUR
  LOCAL_PURCHASE
  EVENT_ATTENDANCE
  REFERRAL
  ECO_ACTION
  COMMUNITY_HELP
  DAILY_SEED
  SUPPORT_POST
  ADMIN_GRANT
  ADMIN_DEDUCT
  EXPIRATION
  OFFER_CREATED
  REVIEW
  PURCHASE
  DISCOUNT
  SERVICE
  EVENT_ACCESS
  ADJUSTMENT
  SYSTEM_REWARD
}

enum DAOStatus {
  VOTING
  EXECUTED
  CANCELLED
}

enum EconomicLayer {
  TRADITIONAL
  TRANSITIONAL
  GIFT_PURE
  CHAMELEON
}

enum EventStatus {
  ACTIVE
  CANCELLED
  COMPLETED
}

enum EventType {
  WORKSHOP
  CLEANUP
  MARKET
  SOCIAL
  REPAIR_CAFE
  COMMUNITY_MEAL
  SKILLSHARE
}

enum ExchangeType {
  EUR
  CREDITS
  TIME_HOURS
  MIXED
  FREE
}

enum ExperienceLevel {
  BEGINNER
  INTERMEDIATE
  EXPERT
}

enum FlashDealStatus {
  ACTIVE
  EXPIRED
  SOLD_OUT
}

enum FlowType {
  PEER_TO_PEER
  COMMUNITY_POOL
  POOL_DISTRIBUTION
  DEMURRAGE
  FLOW_BONUS
}

enum GovernanceType {
  CONSENSUS
  QUADRATIC_VOTING
  SIMPLE_MAJORITY
  SUPER_MAJORITY
  ROTATING_ADMIN
}

enum GroupBuyOrderStatus {
  PENDING
  CONFIRMED
  READY_FOR_PICKUP
  PICKED_UP
  CANCELLED
}

enum GroupBuyStatus {
  ACTIVE
  COMPLETED
  CANCELLED
  EXPIRED
}

enum GuaranteeStatus {
  PENDING
  ACTIVE
  CLAIMED
  EXPIRED
  CANCELED
}

enum HousingStatus {
  ACTIVE
  BOOKED
  PAUSED
  INACTIVE
}

enum HousingType {
  EMERGENCY
  TRANSITION
  EXCHANGE
  NOMAD
  GUEST
  OTHER
}

enum ImpactLevel {
  LOW
  MEDIUM
  HIGH
  TRANSFORMATIVE
}

enum LiveEventStatus {
  ANNOUNCED
  ACTIVE
  COMPLETED
  CANCELLED
}

enum MemberStatus {
  PENDING
  APPROVED
  ACTIVE
  INACTIVE
  LEFT
  EXPELLED
}

enum MembershipRequestStatus {
  PENDING
  APPROVED
  REJECTED
}

enum MetricPeriod {
  DAILY
  WEEKLY
  MONTHLY
  QUARTERLY
  YEARLY
  ALL_TIME
}

enum ModerationDecision {
  KEEP
  REMOVE
  WARN
}

enum NeedCategory {
  URGENT
  CHRONIC
  PROJECT
  EMERGENCY
}

enum NeedScope {
  PERSONAL
  COMMUNITY
  INTERCOMMUNITY
  GLOBAL
}

enum NeedStatus {
  OPEN
  PARTIALLY_FILLED
  FILLED
  CLOSED
  CANCELLED
}

enum NeedType {
  FOOD
  HOUSING
  HEALTH
  EDUCATION
  INFRASTRUCTURE
  WATER
  ENERGY
  SANITATION
  LIVELIHOOD
  ENVIRONMENT
  CULTURE
  TECHNOLOGY
  LEGAL
  OTHER
}

enum NodeStatus {
  ACTIVE
  INACTIVE
  SUSPENDED
  MAINTENANCE
}

enum NodeType {
  GENESIS
  CURRENCY
  MARKETPLACE
  GOVERNANCE
  CARE
  EDUCATION
  COMMUNITY
  PROJECT
}

enum NotificationType {
  HELP_REQUEST
  HELP_OFFERED
  TRANSACTION_COMPLETED
  GROUP_BUY_CLOSING
  EVENT_REMINDER
  CREDITS_EARNED
  CREDITS_EXPIRING
  COMMUNITY_MILESTONE
  NEIGHBOR_NEEDS
  WEEKLY_IMPACT
  BURNOUT_CARE
  CONNECTION_SUGGESTION
  NEW_MESSAGE
  POST_MENTION
  POST_SUPPORT
  FEATURE_UNLOCK
  BADGE_EARNED
  LEVEL_UP
  NEARBY_DEAL
  HAPPY_HOUR
  WEEKLY_CHALLENGE
  ANNOUNCEMENT
}

enum OfferStatus {
  ACTIVE
  PAUSED
  COMPLETED
  EXPIRED
  CANCELLED
}

enum OfferType {
  PRODUCT
  SERVICE
  TIME_BANK
  GROUP_BUY
  EVENT
}

enum OrderStatus {
  PENDING
  PAID
  PREPARING
  READY
  COMPLETED
  CANCELLED
  REFUNDED
}

enum OrganizedCommunityType {
  CONSUMER_GROUP
  HOUSING_COOP
  COMMUNITY_BAR
  SOCIAL_CENTER
  WORKER_COOP
  NEIGHBORHOOD_ASSOCIATION
  TRANSITION_TOWN
  ECOVILLAGE
  SOLIDARITY_NETWORK
  CULTURAL_SPACE
}

enum ParticipacionRole {
  FACILITATOR
  CO_FACILITATOR
  MEMBER
  OBSERVER
}

enum ParticipacionStatus {
  INVITED
  ACTIVE
  INACTIVE
  LEFT
}

enum PaymentMethod {
  CASH
  CARD
  CREDITS
  MIXED
}

enum PaymentStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
  REFUNDED
}

enum PhaseStatus {
  PENDING
  ACTIVE
  COMPLETED
  SKIPPED
}

enum PoolType {
  NEEDS
  PROJECTS
  EMERGENCY
  CELEBRATION
  EQUALITY
}

enum PostType {
  STORY
  NEED
  OFFER
  THANKS
  ACHIEVEMENT
  MILESTONE
  TIP
}

enum ProjectStatus {
  FORMING
  FUNDING
  READY
  EXECUTING
  COMPLETED
  PAUSED
  CANCELLED
}

enum ProjectType {
  INFRASTRUCTURE
  WATER_SANITATION
  EDUCATION
  HEALTH
  ENVIRONMENT
  AGRICULTURE
  ENERGY
  HOUSING
  AUZOLAN
  CULTURAL
  TECHNOLOGY
  EMERGENCY_RELIEF
  OTHER
}

enum ProposalStatus {
  DISCUSSION
  VOTING
  APPROVED
  REJECTED
  IMPLEMENTED
}

enum ProposalType {
  FEATURE
  RULE_CHANGE
  FUND_ALLOCATION
  PARTNERSHIP
  COMMUNITY_UPDATE
  COMMUNITY_DISSOLUTION
}

enum ReactionType {
  THANKS
  SUPPORT
  HELPED
  CELEBRATE
}

enum ReportReason {
  SPAM
  INAPPROPRIATE
  SCAM
  HARASSMENT
  FALSE_INFO
  OTHER
}

enum ReportStatus {
  PENDING
  REVIEWING
  RESOLVED
  DISMISSED
}

enum ReportedType {
  USER
  POST
  OFFER
  MESSAGE
  TRANSACTION
}

enum RequestStatus {
  PENDING
  APPROVED
  REJECTED
  DISTRIBUTED
  CANCELLED
}

enum ResourceType {
  EUR
  CREDITS
  TIME_HOURS
  SKILLS
  MATERIALS
  EQUIPMENT
  TRANSPORTATION
  LAND
}

enum ReviewType {
  OFFER
  USER
  EVENT
}

enum SecurityEventType {
  BLACKLISTED_DID_ATTEMPT
  BLACKLISTED_ADDRESS_ATTEMPT
  CONCURRENT_TRANSACTION_ATTEMPT
  RATE_LIMIT_EXCEEDED_1H
  RATE_LIMIT_EXCEEDED_24H
  VOLUME_LIMIT_EXCEEDED_1H
  VOLUME_LIMIT_EXCEEDED_24H
  LARGE_TRANSACTION_ATTEMPT
  RAPID_SUCCESSION_ATTEMPT
  ANOMALOUS_AMOUNT
  DOUBLE_SPEND_ATTEMPT
  CIRCUIT_BREAKER_OPENED
  CIRCUIT_BREAKER_CLOSED
  SUSPICIOUS_PATTERN
}

enum SecuritySeverity {
  LOW
  MEDIUM
  HIGH
  CRITICAL
}

enum SeedType {
  GREETING
  SHARING
  HELPING
  LEARNING
  CONNECTING
  ECO_ACTION
}

enum SemillaTransactionStatus {
  PENDING
  COMPLETED
  FAILED
  CANCELLED
}

enum SemillaTransactionType {
  TRANSFER
  REWARD
  PURCHASE
  DONATION
  POOL_CONTRIBUTION
  POOL_DISTRIBUTION
  FEE
  INITIAL_GRANT
  BRIDGE_LOCK
  BRIDGE_UNLOCK
}

enum SpaceStatus {
  ACTIVE
  PAUSED
  INACTIVE
}

enum SpaceType {
  ROOM
  STORAGE
  WORKSHOP
  GARDEN
  PARKING
  STUDIO
  KITCHEN
  OFFICE
  VENUE
  OTHER
}

enum StoryType {
  HELP_REQUEST
  ACHIEVEMENT
  DEAL
  EVENT
  GENERAL
}

enum SupportStatus {
  ACTIVE
  FULFILLED
  WITHDRAWN
}

enum SwipeDirection {
  LEFT
  RIGHT
  SUPER
}

enum TransactionStatus {
  PENDING
  CONFIRMED
  COMPLETED
  CANCELLED
  DISPUTED
}

enum UserRole {
  CITIZEN
  MERCHANT
  ADMIN
  MODERATOR
  PUBLIC_ENTITY
}

enum ValidationDecision {
  APPROVE
  REJECT
}

enum Visibility {
  PUBLIC
  NEIGHBORS
  FRIENDS
  PRIVATE
}

enum VoteDecision {
  APPROVE
  REJECT
  ABSTAIN
}

enum WeeklyMood {
  AVAILABLE
  LEARNING
  ORGANIZING
  RESTING
}

enum IntegrationPlatform {
  TELEGRAM
  WHATSAPP_BUSINESS
  DISCORD
  SIGNAL
  SLACK
}

enum ContactMethod {
  APP
  TELEGRAM
  WHATSAPP
  EMAIL
  PHONE
}
