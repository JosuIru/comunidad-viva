# =============================================================================
# PRODUCTION ENVIRONMENT VARIABLES - Comunidad Viva
# =============================================================================
# IMPORTANT: Copy this file to .env.production and fill with real values
# Never commit .env.production to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Node Environment
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=4000

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DB_USER=comunidad
DB_PASSWORD=CHANGE_ME_SECURE_PASSWORD_HERE
DATABASE_URL=postgresql://comunidad:CHANGE_ME_SECURE_PASSWORD_HERE@postgres:5432/comunidad_viva?schema=public

# -----------------------------------------------------------------------------
# Redis Configuration (for caching and sessions)
# -----------------------------------------------------------------------------
REDIS_URL=redis://redis:6379

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# JWT Secret - MUST be at least 32 characters, use a strong random string
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=CHANGE_ME_GENERATE_SECURE_RANDOM_STRING_64_CHARS_MINIMUM

# NextAuth Secret (if using NextAuth in future)
NEXTAUTH_SECRET=CHANGE_ME_GENERATE_SECURE_RANDOM_STRING_64_CHARS_MINIMUM
NEXTAUTH_URL=https://your-domain.com

# -----------------------------------------------------------------------------
# URLs and CORS
# -----------------------------------------------------------------------------
# Backend API URL (for internal communication)
API_URL=https://api.your-domain.com

# Frontend URL(s) - comma-separated for multiple domains
# Used for CORS configuration
FRONTEND_URL=https://your-domain.com,https://www.your-domain.com

# -----------------------------------------------------------------------------
# Payment Processing (Stripe)
# -----------------------------------------------------------------------------
# PRODUCTION keys - get from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret_here
STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key_here

# -----------------------------------------------------------------------------
# Email Configuration (SMTP)
# -----------------------------------------------------------------------------
# Gmail example - use App Password if 2FA is enabled
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-specific-password

# Email sender information
EMAIL_FROM=Comunidad Viva <noreply@your-domain.com>

# -----------------------------------------------------------------------------
# SMS Notifications (Twilio)
# -----------------------------------------------------------------------------
# Get credentials from https://console.twilio.com
TWILIO_ACCOUNT_SID=ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_PHONE_NUMBER=+1234567890

# -----------------------------------------------------------------------------
# Cloud Storage (S3 or Compatible)
# -----------------------------------------------------------------------------
# AWS S3 or compatible service (DigitalOcean Spaces, Backblaze B2, etc.)
S3_BUCKET=comunidad-viva-production
S3_ACCESS_KEY=your_access_key_id
S3_SECRET_KEY=your_secret_access_key
S3_REGION=eu-west-1
S3_ENDPOINT=https://s3.eu-west-1.amazonaws.com

# For DigitalOcean Spaces, use:
# S3_ENDPOINT=https://fra1.digitaloceanspaces.com

# -----------------------------------------------------------------------------
# Monitoring and Error Tracking
# -----------------------------------------------------------------------------
# Sentry DSN for error tracking (optional but recommended)
# Get from https://sentry.io
SENTRY_DSN=https://xxxxx@xxxxx.ingest.sentry.io/xxxxx

# Grafana credentials (if using monitoring stack)
GRAFANA_PASSWORD=CHANGE_ME_SECURE_PASSWORD

# -----------------------------------------------------------------------------
# Feature Flags (optional)
# -----------------------------------------------------------------------------
ENABLE_ANALYTICS=true
ENABLE_NOTIFICATIONS=true
ENABLE_PAYMENTS=true

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Requests per minute per IP
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# -----------------------------------------------------------------------------
# Session Configuration
# -----------------------------------------------------------------------------
SESSION_SECRET=CHANGE_ME_GENERATE_SECURE_RANDOM_STRING
SESSION_MAX_AGE=86400000

# -----------------------------------------------------------------------------
# Geolocation API (optional)
# -----------------------------------------------------------------------------
# For geocoding addresses to coordinates
MAPBOX_ACCESS_TOKEN=pk.XXXXXXXXXXXXXXXXXXXXXXXXX
# or
GOOGLE_MAPS_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXX

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Logging level: error, warn, info, debug
LOG_LEVEL=info

# Log to file (true/false)
LOG_TO_FILE=true
LOG_DIR=/var/log/comunidad-viva

# -----------------------------------------------------------------------------
# CDN and Asset Configuration
# -----------------------------------------------------------------------------
# CDN URL for static assets (optional)
CDN_URL=https://cdn.your-domain.com

# -----------------------------------------------------------------------------
# Database Backup
# -----------------------------------------------------------------------------
# Automated backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=comunidad-viva-backups

# =============================================================================
# DEPLOYMENT CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
# [ ] All CHANGE_ME values are replaced with secure values
# [ ] JWT_SECRET is at least 64 characters of random data
# [ ] Database credentials are strong and unique
# [ ] CORS origins (FRONTEND_URL) are correctly set
# [ ] SSL certificates are configured
# [ ] Stripe is in live mode with production keys
# [ ] Email SMTP is configured and tested
# [ ] S3 bucket exists and permissions are set
# [ ] Sentry project is created (if using)
# [ ] Database migrations are applied
# [ ] Rate limiting is appropriate for your traffic
# =============================================================================
