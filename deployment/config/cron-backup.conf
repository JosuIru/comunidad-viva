# TRUK - Configuración de Cron para Backups Automáticos
# Instalar con: crontab -e (como root)
# O copiar a: /etc/cron.d/truk-backup

# Variables de entorno
SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
INSTALL_DIR=/opt/truk
MAILTO=admin@truk.app

# Backup completo diario a las 2:00 AM
0 2 * * * root BACKUP_TYPE=full /opt/truk/deployment/scripts/backup.sh backup >> /var/log/truk-backup.log 2>&1

# Backup de base de datos cada 6 horas
0 */6 * * * root BACKUP_TYPE=database /opt/truk/deployment/scripts/backup.sh backup >> /var/log/truk-backup.log 2>&1

# Health check cada hora
0 * * * * root /opt/truk/deployment/scripts/monitor.sh check >> /var/log/truk-monitor.log 2>&1

# Limpieza de logs antiguos cada semana (domingos a las 3 AM)
0 3 * * 0 root find /opt/truk/logs -name "*.log" -mtime +30 -delete
